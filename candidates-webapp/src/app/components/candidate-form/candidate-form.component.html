<h2 mat-dialog-title>Add New Candidate</h2>

<mat-dialog-content>
  <form [formGroup]="candidateForm" class="candidate-form">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>First Name</mat-label>
      <input matInput formControlName="firstName" placeholder="Enter first name">
      <mat-error *ngIf="candidateForm.get('firstName')?.invalid && candidateForm.get('firstName')?.touched">
        {{ getErrorMessage('firstName') }}
      </mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Last Name</mat-label>
      <input matInput formControlName="lastName" placeholder="Enter last name">
      <mat-error *ngIf="candidateForm.get('lastName')?.invalid && candidateForm.get('lastName')?.touched">
        {{ getErrorMessage('lastName') }}
      </mat-error>
    </mat-form-field>

    <div class="file-upload-section">
      <label class="file-upload-label">
        Excel File with Candidate Data *
      </label>
      <div class="file-upload-container">
        <input 
          type="file" 
          #fileInput 
          (change)="onFileSelected($event)"
          accept=".xlsx,.xls"
          class="file-input"
          id="file-upload">
        <button 
          type="button" 
          mat-stroked-button 
          (click)="fileInput.click()"
          class="file-upload-button">
          <mat-icon>upload_file</mat-icon>
          Choose Excel File
        </button>
        <span class="file-info" *ngIf="selectedFile">
          {{ selectedFile.name }}
        </span>
        <span class="file-info error" *ngIf="!selectedFile">
          Please select an Excel file
        </span>
      </div>
      <div class="file-requirements">
        <p><strong>Excel file requirements:</strong></p>
        <ul>
          <li>Must contain one data row with 3 columns:</li>
          <li>1. Seniority: "Junior" or "Senior"</li>
          <li>2. Years of Experience: Number (â‰¥ 0)</li>
          <li>3. Availability: true or false</li>
        </ul>
      </div>
    </div>
  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()" [disabled]="loading">
    Cancel
  </button>
  <button 
    mat-raised-button 
    color="primary" 
    (click)="onSubmit()"
    [disabled]="!candidateForm.valid || !selectedFile || loading">
    <mat-spinner diameter="20" *ngIf="loading"></mat-spinner>
    <span *ngIf="!loading">Create Candidate</span>
    <span *ngIf="loading">Creating...</span>
  </button>
</mat-dialog-actions>